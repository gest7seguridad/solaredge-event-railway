# ============================================
# CONFIGURACIÓN ESPECÍFICA PARA PLESK
# Archivo: .env.plesk
# ============================================

# ============================================
# ENTORNO Y APLICACIÓN
# ============================================
NODE_ENV=production
PORT=3000
APP_NAME=SolarEdge Event System

# ============================================
# BASE DE DATOS POSTGRESQL - GESTSIETE.ES
# ============================================
DB_HOST=gestsiete.es
DB_PORT=5432
DB_USER=events_u
DB_PASSWORD=events_pass$$
DB_NAME=events_n

# SSL para conexión remota
DB_SSL=true
DB_SSL_REJECT_UNAUTHORIZED=false

# Pool de conexiones optimizado
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_CONNECTION_TIMEOUT=60000

# ============================================
# SEGURIDAD - JWT
# ============================================
# IMPORTANTE: Cambiar este secret antes del deployment
JWT_SECRET=SolarLand2025PleskSecure!@#$%^&*()_+RandomKey987654321
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# CONFIGURACIÓN SMTP (Email)
# ============================================
# Opción 1: Gmail (requiere contraseña de aplicación)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=tu-email@gmail.com
SMTP_PASS=xxxx-xxxx-xxxx-xxxx

# Opción 2: Servidor SMTP de Plesk/hosting
# SMTP_HOST=mail.gestsiete.es
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=noreply@solarland.gestsiete.es
# SMTP_PASS=tu-password-email

# Remitente
EMAIL_FROM="SolarEdge Event" <noreply@solarland.gestsiete.es>
EMAIL_REPLY_TO=info@solarland.gestsiete.es

# ============================================
# URLS DE LA APLICACIÓN
# ============================================
# Dominio principal
FRONTEND_URL=https://solarland.gestsiete.es
BACKEND_URL=https://solarland.gestsiete.es

# URLs internas (para Node.js)
INTERNAL_API_URL=http://127.0.0.1:3000
PUBLIC_URL=https://solarland.gestsiete.es

# ============================================
# RATE LIMITING Y SEGURIDAD
# ============================================
# Límite de requests por IP
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS - Dominios permitidos
CORS_ORIGIN=https://solarland.gestsiete.es,https://www.solarland.gestsiete.es
CORS_CREDENTIALS=true

# Sesiones
SESSION_SECRET=PleskSession2025Secret!@#$%
SESSION_MAX_AGE=86400000

# ============================================
# PATHS Y DIRECTORIOS (PLESK)
# ============================================
# Rutas absolutas en servidor Plesk (subdominio)
APP_ROOT=/var/www/vhosts/gestsiete.es/solarland.gestsiete.es
BACKEND_PATH=/var/www/vhosts/gestsiete.es/solarland.gestsiete.es/backend
FRONTEND_PATH=/var/www/vhosts/gestsiete.es/solarland.gestsiete.es/frontend/dist
UPLOADS_PATH=/var/www/vhosts/gestsiete.es/solarland.gestsiete.es/uploads
LOGS_PATH=/var/www/vhosts/gestsiete.es/solarland.gestsiete.es/logs

# ============================================
# ALMACENAMIENTO Y UPLOADS
# ============================================
# Tamaño máximo de archivos
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# Directorio de uploads
UPLOAD_DIR=./uploads
TEMP_DIR=/tmp

# ============================================
# LOGGING Y MONITOREO
# ============================================
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_TO_FILE=true
LOG_FILE_PATH=/var/www/vhosts/gestsiete.es/solarland.gestsiete.es/logs/app.log
ERROR_LOG_PATH=/var/www/vhosts/gestsiete.es/solarland.gestsiete.es/logs/error.log

# ============================================
# CACHE
# ============================================
CACHE_ENABLED=true
CACHE_TTL=3600
STATIC_CACHE_MAX_AGE=31536000

# ============================================
# CONFIGURACIÓN DE PROCESO
# ============================================
# PM2 / Node.js
NODE_OPTIONS=--max-old-space-size=512
CLUSTER_WORKERS=2

# ============================================
# APIS EXTERNAS (si aplica)
# ============================================
# Google Analytics
# GA_TRACKING_ID=UA-XXXXXXXXX-X

# reCAPTCHA (opcional)
# RECAPTCHA_SITE_KEY=
# RECAPTCHA_SECRET_KEY=

# ============================================
# MODO DE MANTENIMIENTO
# ============================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=El sistema está en mantenimiento. Volvemos pronto.

# ============================================
# CONFIGURACIÓN ESPECÍFICA DEL EVENTO
# ============================================
EVENT_MAX_CAPACITY=300
REGISTRATION_DEADLINE=2025-02-15T23:59:59
ADMIN_EMAIL=admin@solarland.gestsiete.es
NOTIFICATION_EMAIL=notificaciones@solarland.gestsiete.es

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_REGISTRATION=true
ENABLE_QR_CODES=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_EXPORT=true
ENABLE_ANALYTICS=false

# ============================================
# BACKUP Y RECOVERY
# ============================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# ============================================
# NOTAS IMPORTANTES PARA PLESK
# ============================================
# 1. Cambiar JWT_SECRET y SESSION_SECRET por valores únicos
# 2. Configurar SMTP con credenciales reales
# 3. Verificar rutas absolutas según tu servidor
# 4. Ajustar CLUSTER_WORKERS según recursos disponibles
# 5. Configurar CORS_ORIGIN con dominios exactos
# ============================================